schemas:
  common_fields:
    _id: str
    type: str
    profile:
      name: str
    metadata:
      created_at: datetime
      updated_at: datetime

  entity:
    data:
      vacancy_status: bool # false if pet is inside room, true if pet is outside room
      denial_status: bool # false if feedback mechanism is deactivated for all devices' sides facing the room, true otherwise
      last_time_accessed: datetime # -1 if room was never accessed
      pet_accesses: List[Dict] # dictionary of accesses, elements contain timestamp_of_access and duration
      denial_statuses: List[Dict] # dictionary of past denial setting, elements contain timestamp_of_setting and duration

  validations:
    mandatory_fields:
      root:
        - _id
        - type
      profile:
        - name
      metadata:
        - created_at
        - updated_at

    type_constraints:
      name:
        type: str
      vacancy_status:
        type: bool
      denial_status:
        type: bool
      last_time_accessed:
        type: datetime
      pet_accesses:
        type: List[Dict]
        item_constraints:
          required_fields: ["timestamp_of_access", "duration"]
          type_mappings:
            timestamp_of_access: datetime
            duration: int # seconds, can be -1 if room is still occupied by the pet
      denial_statuses:
        type: List[Dict]
        item_constraints:
          required_fields: [ "timestamp_of_setting", "duration" ]
          type_mappings:
            timestamp_of_setting: datetime
            duration: int # seconds, can be -1 if room is still in denial

    initialization:
      name: "Random room"
      vacancy_status: True
      denial_status: False
      pet_accesses: []
      denial_statuses: []
